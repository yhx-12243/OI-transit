<link type="text/css" rel="stylesheet" href="../additional_files/css/bootstrap.min.css">
<link type="text/css" rel="stylesheet" href="../additional_files/css/sh_typical.min.css">
<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$', '$']], displayMath: [['$$', '$$']]}});</script>
<script type="text/javascript" src="../additional_files/MathJax-master/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<h3>题目描述</h3>
<p>桌上有一张边界平行于坐标轴的正方形纸片，左下角的坐标为 $(0, 0)$，右上角的坐标为 $(100, 100)$。</p>
<p>接下来执行 $n$ 条折纸命令。每条命令用两个不同点 $P_1(x_1, y_1)$ 和 $P_2(x_2, y_2)$ 来表示，执行时把当前的折纸作品沿着 $P_1P_2$ 所在直线折叠，并把有向线段 $P_1P_2$ 的右边折向左边 (左边的部分保持不变)。</p>
<p>折叠结束后，需要在作品上打一个孔，然后用绳子穿起来挂在墙上。孔的位置是相当重要的：若需要穿过太多层的纸，打孔本身比较困难；若穿过的层数太少，悬挂起来以后作品可能会被撕破。</p>
<p>为了选择一个比较合适的打孔位置，你需要计算在每个候选位置打孔时穿过的层数。如果恰好穿过某一层的边界 (误差 $10^{-6}$ 内)，则该层不统计在结果中。本题考虑一个简化的模型：纸的厚度不计，因此折纸操作总能完美执行。</p>

<h3>输入格式</h3>
<p>第一行包含一个非负整数 $n$ ($n \leq 8$)，即折纸的次数。</p>
<p>接下来的 $n$ 行，每行包含四个实数 $x_1, y_1, x_2, y_2$，表示每次折纸时对应的有向线段。</p>
<p>下一行包含一个正整数 $m$ ($m \leq 50$)，即候选位置的个数。</p>
<p>接下来的 $m$ 行，每行包含两个实数 $x, y$，表示一个候选位置。</p>

<h3>输出格式</h3>
<p>每个候选位置输出一行，包含一个整数，即该位置打孔时穿过的层数。</p>

<h3>题解</h3>
<p style="color: red">先讲几句废话吧：计算几何中，在表示直线 (不是线段时)，强烈推荐用一般式 $Ax + By + C = 0$ 而不是两点式 $(x_1, y_1), (x_2, y_2)$ 存储！</p>
<p>其实这是有道理的。第一，一般式只需用到 $3$ 个变量 ($A, B, C$)，而两点式会用到 $4$ 个变量 ($x_1, y_1, x_2, y_2$)。同样表示一条直线，用的变量多了，它们内部的约束自然就强了。况且，这 $3$ 个变量 ($A, B, C$) 之间的约束非常简单，它们只是成一个比例而已。</p>
<p>其次，<strong>直线</strong>方程 $Ax + By + C = 0$ 有一个好处，它可以将任何一个点<strong>代入</strong>这条直线 (当然直线上的点代入得到的值一定为 $0$)。由于一条直线将平面分成两个半平面，那么，一定有其中一个半平面中的点代入所得的值都 $&gt; 0$，另一个半平面中的点代入所得的值都 $&lt; 0$，这样，就非常方便地判断点在直线的哪一侧 (比如这道题就需要)。</p>
<p>最后，这种方程还可以非常简单地计算一般地计算几何所需的事情。过两点的直线，只需外积即可，两直线交点，还是两个外积。点到直线的距离，点关于直线的对称点，都可以轻松求出，具体见模板 "<a href="../templates.html#cg02" target="_blank">直线及其函数</a>"。</p>
<hr />
<p>接下来回到正题。对于每次折纸给定两个点，可以求出过它们的直线。由于两个点是有向的，故我们可以令直线右边 (即要折过去的一侧) 代入的值 $&lt; 0$，直线左边 (即要折过来的一侧) 代入的值 $&gt; 0$ 即可。转化成一条直线 ($A, B, C$)。</p>
<p>对于每次询问 (一个候选位置)，我们考虑它的所有的初始情况。倒着考虑，首先考虑最后一次的情况。如果它在那条直线的左边，那么它折之前可能在左边，也可能在右边 (该点关于该直线的对称点)，否则，它折之前只可能在右边。</p>
<p>由于折纸次数不是很多，于是可以使用 <code>dfs()</code> 用 $O(2^n)$ 时间获得它所有<strong>可能的</strong>原始位置。</p>
<p>过滤掉纸片之外的点，然后去重。那么接下来的点数就是答案吗？不一定，如下图：</p>
<img class="center-block" src="uploads/20.png" alt="折叠">
<p>将 $P_1$ 进行逆推，可以得到三个点 $P_1, P_2, P_3$，而其中只有 $P_2, P_3$ 是符合要求的，因此对每个点，还要进行<strong>最终检验</strong>再筛去一些没有用的解。</p>
<p>最后，由题目中的一句话<strong>穿过某一层的边界</strong>，就不统计在结果中。可以发现，当在<strong>最终检验</strong>时一个点跑到了折痕上，则这个点一定不满足要求 (如上图的 $Q$ 点)，返回 <code>false</code> (其实从样例中也可以看出来)。</p>
<p>时间复杂度 $O(2^n n m)$。</p>

<h3>代码</h3>

<div class="panel-body"><pre class="sh_sourceCode"><code class="sh_cpp"><span class="sh_preproc">#include</span> <span class="sh_string">&lt;bits/stdc++.h&gt;</span>
<span class="sh_preproc">#define</span> N <span class="sh_number">10</span>
<span class="sh_preproc">#define</span> N2 <span class="sh_number">10034</span>
<span class="sh_keyword">using</span> <span class="sh_keyword">namespace</span> std<span class="sh_symbol">;</span>

<span class="sh_keyword">const</span> <span class="sh_type">double</span> eps <span class="sh_symbol">=</span> <span class="sh_number">1e-8</span><span class="sh_symbol">,</span> EPS <span class="sh_symbol">=</span> <span class="sh_number">1e-13</span><span class="sh_symbol">;</span>

<span class="sh_keyword">struct</span><span class="sh_normal"> </span><span class="sh_classname">vec2</span><span class="sh_cbracket">{</span>
    <span class="sh_type">double</span> x<span class="sh_symbol">,</span> y<span class="sh_symbol">;</span>
    <span class="sh_function">vec2</span> <span class="sh_symbol">(</span><span class="sh_type">double</span> x0 <span class="sh_symbol">=</span> <span class="sh_number">0.0</span><span class="sh_symbol">,</span> <span class="sh_type">double</span> y0 <span class="sh_symbol">=</span> <span class="sh_number">0.0</span><span class="sh_symbol">):</span> <span class="sh_function">x</span><span class="sh_symbol">(</span>x0<span class="sh_symbol">),</span> <span class="sh_function">y</span><span class="sh_symbol">(</span>y0<span class="sh_symbol">)</span> <span class="sh_cbracket">{}</span>
    vec2 <span class="sh_symbol">*</span> <span class="sh_function">read</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span><span class="sh_function">scanf</span><span class="sh_symbol">(</span><span class="sh_string">"%lf%lf"</span><span class="sh_symbol">,</span> <span class="sh_symbol">&amp;</span>x<span class="sh_symbol">,</span> <span class="sh_symbol">&amp;</span>y<span class="sh_symbol">);</span> <span class="sh_keyword">return</span> <span class="sh_keyword">this</span><span class="sh_symbol">;</span><span class="sh_cbracket">}</span>
    <span class="sh_keyword">inline</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span><span class="sh_keyword">operator</span> <span class="sh_symbol">+</span> <span class="sh_symbol">(</span><span class="sh_keyword">const</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span><span class="sh_symbol">&amp;</span>B<span class="sh_symbol">)</span> <span class="sh_keyword">const</span> <span class="sh_cbracket">{</span><span class="sh_keyword">return</span> <span class="sh_function">vec2</span><span class="sh_symbol">(</span>x <span class="sh_symbol">+</span> B<span class="sh_symbol">.</span>x<span class="sh_symbol">,</span> y <span class="sh_symbol">+</span> B<span class="sh_symbol">.</span>y<span class="sh_symbol">);</span><span class="sh_cbracket">}</span>
    <span class="sh_keyword">inline</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span><span class="sh_keyword">operator</span> <span class="sh_symbol">-</span> <span class="sh_symbol">(</span><span class="sh_keyword">const</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span><span class="sh_symbol">&amp;</span>B<span class="sh_symbol">)</span> <span class="sh_keyword">const</span> <span class="sh_cbracket">{</span><span class="sh_keyword">return</span> <span class="sh_function">vec2</span><span class="sh_symbol">(</span>x <span class="sh_symbol">-</span> B<span class="sh_symbol">.</span>x<span class="sh_symbol">,</span> y <span class="sh_symbol">-</span> B<span class="sh_symbol">.</span>y<span class="sh_symbol">);</span><span class="sh_cbracket">}</span>
    <span class="sh_keyword">inline</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span><span class="sh_keyword">operator</span> <span class="sh_symbol">*</span> <span class="sh_symbol">(</span><span class="sh_type">double</span> k<span class="sh_symbol">)</span> <span class="sh_keyword">const</span> <span class="sh_cbracket">{</span><span class="sh_keyword">return</span> <span class="sh_function">vec2</span><span class="sh_symbol">(</span>x <span class="sh_symbol">*</span> k<span class="sh_symbol">,</span> y <span class="sh_symbol">*</span> k<span class="sh_symbol">);</span><span class="sh_cbracket">}</span>
    <span class="sh_keyword">inline</span> <span class="sh_type">double</span> <span class="sh_keyword">operator</span> <span class="sh_symbol">*</span> <span class="sh_symbol">(</span><span class="sh_keyword">const</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span><span class="sh_symbol">&amp;</span>B<span class="sh_symbol">)</span> <span class="sh_keyword">const</span> <span class="sh_cbracket">{</span><span class="sh_keyword">return</span> x <span class="sh_symbol">*</span> B<span class="sh_symbol">.</span>x <span class="sh_symbol">+</span> y <span class="sh_symbol">*</span> B<span class="sh_symbol">.</span>y<span class="sh_symbol">;</span><span class="sh_cbracket">}</span>
    <span class="sh_keyword">inline</span> <span class="sh_type">double</span> <span class="sh_keyword">operator</span> <span class="sh_symbol">^</span> <span class="sh_symbol">(</span><span class="sh_keyword">const</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span><span class="sh_symbol">&amp;</span>B<span class="sh_symbol">)</span> <span class="sh_keyword">const</span> <span class="sh_cbracket">{</span><span class="sh_keyword">return</span> x <span class="sh_symbol">*</span> B<span class="sh_symbol">.</span>y <span class="sh_symbol">-</span> y <span class="sh_symbol">*</span> B<span class="sh_symbol">.</span>x<span class="sh_symbol">;</span><span class="sh_cbracket">}</span>
    <span class="sh_keyword">inline</span> <span class="sh_type">double</span> <span class="sh_function">norm2</span><span class="sh_symbol">()</span> <span class="sh_keyword">const</span> <span class="sh_cbracket">{</span><span class="sh_keyword">return</span> <span class="sh_symbol">*</span><span class="sh_keyword">this</span> <span class="sh_symbol">*</span> <span class="sh_symbol">*</span><span class="sh_keyword">this</span><span class="sh_symbol">;</span><span class="sh_cbracket">}</span>
    <span class="sh_keyword">inline</span> <span class="sh_type">bool</span> <span class="sh_keyword">operator</span> <span class="sh_symbol">&lt;</span> <span class="sh_symbol">(</span><span class="sh_keyword">const</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span><span class="sh_symbol">&amp;</span>B<span class="sh_symbol">)</span> <span class="sh_keyword">const</span> <span class="sh_cbracket">{</span><span class="sh_keyword">return</span> x <span class="sh_symbol">&lt;</span> B<span class="sh_symbol">.</span>x <span class="sh_symbol">-</span> eps <span class="sh_symbol">||</span> x <span class="sh_symbol">&lt;</span> B<span class="sh_symbol">.</span>x <span class="sh_symbol">+</span> eps <span class="sh_symbol">&amp;&amp;</span> y <span class="sh_symbol">&lt;</span> B<span class="sh_symbol">.</span>y <span class="sh_symbol">-</span> eps<span class="sh_symbol">;</span><span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">;</span>

<span class="sh_keyword">struct</span><span class="sh_normal"> </span><span class="sh_classname">line</span><span class="sh_cbracket">{</span>
    <span class="sh_type">double</span> A<span class="sh_symbol">,</span> B<span class="sh_symbol">,</span> C<span class="sh_symbol">;</span> <span class="sh_comment">// Ax + By + C = 0</span>
    <span class="sh_function">line</span> <span class="sh_symbol">(</span><span class="sh_type">double</span> A0 <span class="sh_symbol">=</span> <span class="sh_number">0.0</span><span class="sh_symbol">,</span> <span class="sh_type">double</span> B0 <span class="sh_symbol">=</span> <span class="sh_number">0.0</span><span class="sh_symbol">,</span> <span class="sh_type">double</span> C0 <span class="sh_symbol">=</span> <span class="sh_number">0.0</span><span class="sh_symbol">):</span> <span class="sh_function">A</span><span class="sh_symbol">(</span>A0<span class="sh_symbol">),</span> <span class="sh_function">B</span><span class="sh_symbol">(</span>B0<span class="sh_symbol">),</span> <span class="sh_function">C</span><span class="sh_symbol">(</span>C0<span class="sh_symbol">)</span> <span class="sh_cbracket">{}</span>
    <span class="sh_keyword">inline</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span><span class="sh_function">normVec</span><span class="sh_symbol">()</span> <span class="sh_keyword">const</span> <span class="sh_cbracket">{</span><span class="sh_keyword">return</span> <span class="sh_function">vec2</span><span class="sh_symbol">(</span>A<span class="sh_symbol">,</span> B<span class="sh_symbol">);</span><span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">;</span>

<span class="sh_comment">// substitute a point for a line.</span>
<span class="sh_keyword">inline</span> <span class="sh_type">double</span> <span class="sh_function">substitute</span><span class="sh_symbol">(</span><span class="sh_keyword">const</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span>P<span class="sh_symbol">,</span> <span class="sh_keyword">const</span> <span class="sh_usertype">line</span><span class="sh_normal"> </span>l<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span><span class="sh_keyword">return</span> l<span class="sh_symbol">.</span>A <span class="sh_symbol">*</span> P<span class="sh_symbol">.</span>x <span class="sh_symbol">+</span> l<span class="sh_symbol">.</span>B <span class="sh_symbol">*</span> P<span class="sh_symbol">.</span>y <span class="sh_symbol">+</span> l<span class="sh_symbol">.</span>C<span class="sh_symbol">;</span><span class="sh_cbracket">}</span>

<span class="sh_comment">// return a line through 2 points.</span>
<span class="sh_comment">// the side which the function value &lt; 0 will fold to the other side.</span>
<span class="sh_keyword">inline</span> <span class="sh_usertype">line</span><span class="sh_normal"> </span><span class="sh_function">getLine</span><span class="sh_symbol">(</span><span class="sh_keyword">const</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span>u<span class="sh_symbol">,</span> <span class="sh_keyword">const</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span>v<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span><span class="sh_keyword">return</span> <span class="sh_function">line</span><span class="sh_symbol">(</span>u<span class="sh_symbol">.</span>y <span class="sh_symbol">-</span> v<span class="sh_symbol">.</span>y<span class="sh_symbol">,</span> v<span class="sh_symbol">.</span>x <span class="sh_symbol">-</span> u<span class="sh_symbol">.</span>x<span class="sh_symbol">,</span> u <span class="sh_symbol">^</span> v<span class="sh_symbol">);</span><span class="sh_cbracket">}</span>

<span class="sh_comment">// return the symmetry point of a point about given line.</span>
<span class="sh_keyword">inline</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span><span class="sh_function">getSymmetry</span><span class="sh_symbol">(</span><span class="sh_keyword">const</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span>P<span class="sh_symbol">,</span> <span class="sh_keyword">const</span> <span class="sh_usertype">line</span><span class="sh_normal"> </span>l<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
    <span class="sh_type">double</span> K <span class="sh_symbol">=</span> <span class="sh_function">substitute</span><span class="sh_symbol">(</span>P<span class="sh_symbol">,</span> l<span class="sh_symbol">)</span> <span class="sh_symbol">*</span> <span class="sh_number">2.0</span> <span class="sh_symbol">/</span> l<span class="sh_symbol">.</span><span class="sh_function">normVec</span><span class="sh_symbol">().</span><span class="sh_function">norm2</span><span class="sh_symbol">();</span>
    <span class="sh_keyword">return</span> P <span class="sh_symbol">-</span> l<span class="sh_symbol">.</span><span class="sh_function">normVec</span><span class="sh_symbol">()</span> <span class="sh_symbol">*</span> K<span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>

<span class="sh_type">int</span> n<span class="sh_symbol">,</span> q<span class="sh_symbol">,</span> i<span class="sh_symbol">;</span>
<span class="sh_type">int</span> cnt<span class="sh_symbol">,</span> ans<span class="sh_symbol">;</span>
<span class="sh_usertype">line</span><span class="sh_normal"> </span>l<span class="sh_symbol">[</span>N<span class="sh_symbol">];</span>
<span class="sh_usertype">vec2</span><span class="sh_normal"> </span>u<span class="sh_symbol">,</span> v<span class="sh_symbol">;</span>
<span class="sh_usertype">vec2</span><span class="sh_normal"> </span>P<span class="sh_symbol">[</span>N2<span class="sh_symbol">];</span>

<span class="sh_type">void</span> <span class="sh_function">dfs</span><span class="sh_symbol">(</span><span class="sh_usertype">vec2</span><span class="sh_normal"> </span>t<span class="sh_symbol">,</span> <span class="sh_type">int</span> d<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
    <span class="sh_keyword">if</span><span class="sh_symbol">(</span>P<span class="sh_symbol">[</span>cnt<span class="sh_symbol">++]</span> <span class="sh_symbol">=</span> t<span class="sh_symbol">,</span> d<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
        <span class="sh_function">dfs</span><span class="sh_symbol">(</span>t<span class="sh_symbol">,</span> d <span class="sh_symbol">-</span> <span class="sh_number">1</span><span class="sh_symbol">);</span>
        <span class="sh_keyword">if</span><span class="sh_symbol">(</span><span class="sh_function">substitute</span><span class="sh_symbol">(</span>t<span class="sh_symbol">,</span> l<span class="sh_symbol">[</span>d<span class="sh_symbol">])</span> <span class="sh_symbol">&gt;</span> eps<span class="sh_symbol">)</span> <span class="sh_function">dfs</span><span class="sh_symbol">(</span><span class="sh_function">getSymmetry</span><span class="sh_symbol">(</span>t<span class="sh_symbol">,</span> l<span class="sh_symbol">[</span>d<span class="sh_symbol">]),</span> d <span class="sh_symbol">-</span> <span class="sh_number">1</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>

<span class="sh_type">bool</span> <span class="sh_function">check</span><span class="sh_symbol">(</span><span class="sh_usertype">vec2</span><span class="sh_normal"> </span>P<span class="sh_symbol">,</span> <span class="sh_usertype">vec2</span><span class="sh_normal"> </span>Q<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
    <span class="sh_type">double</span> W<span class="sh_symbol">;</span>
    <span class="sh_keyword">for</span><span class="sh_symbol">(</span><span class="sh_type">int</span> i <span class="sh_symbol">=</span> <span class="sh_number">1</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;=</span> n<span class="sh_symbol">;</span> <span class="sh_symbol">++</span>i<span class="sh_symbol">)</span>
        <span class="sh_keyword">if</span><span class="sh_symbol">((</span>W <span class="sh_symbol">=</span> <span class="sh_function">substitute</span><span class="sh_symbol">(</span>P<span class="sh_symbol">,</span> l<span class="sh_symbol">[</span>i<span class="sh_symbol">]))</span> <span class="sh_symbol">&lt;</span> <span class="sh_symbol">-</span>eps<span class="sh_symbol">)</span> P <span class="sh_symbol">=</span> <span class="sh_function">getSymmetry</span><span class="sh_symbol">(</span>P<span class="sh_symbol">,</span> l<span class="sh_symbol">[</span>i<span class="sh_symbol">]);</span>
        <span class="sh_keyword">else</span> <span class="sh_keyword">if</span><span class="sh_symbol">(</span>W <span class="sh_symbol">&lt;</span> eps<span class="sh_symbol">)</span> <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span>
    <span class="sh_keyword">return</span> <span class="sh_symbol">(</span>P <span class="sh_symbol">-</span> Q<span class="sh_symbol">).</span><span class="sh_function">norm2</span><span class="sh_symbol">()</span> <span class="sh_symbol">&lt;</span> EPS<span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>

<span class="sh_type">int</span> <span class="sh_function">main</span><span class="sh_symbol">()</span><span class="sh_cbracket">{</span>
    <span class="sh_function">scanf</span><span class="sh_symbol">(</span><span class="sh_string">"%d"</span><span class="sh_symbol">,</span> <span class="sh_symbol">&amp;</span>n<span class="sh_symbol">);</span>
    <span class="sh_keyword">for</span><span class="sh_symbol">(</span>i <span class="sh_symbol">=</span> <span class="sh_number">1</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;=</span> n<span class="sh_symbol">;</span> <span class="sh_symbol">++</span>i<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>u<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">();</span> v<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">();</span> l<span class="sh_symbol">[</span>i<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_function">getLine</span><span class="sh_symbol">(</span>u<span class="sh_symbol">,</span> v<span class="sh_symbol">);</span><span class="sh_cbracket">}</span>
    <span class="sh_keyword">for</span><span class="sh_symbol">(</span><span class="sh_function">scanf</span><span class="sh_symbol">(</span><span class="sh_string">"%d"</span><span class="sh_symbol">,</span> <span class="sh_symbol">&amp;</span>q<span class="sh_symbol">);</span> q<span class="sh_symbol">;</span> <span class="sh_symbol">--</span>q<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
        cnt <span class="sh_symbol">=</span> ans <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span>
        <span class="sh_function">dfs</span><span class="sh_symbol">(*</span>u<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">(),</span> n<span class="sh_symbol">);</span>
        <span class="sh_function">sort</span><span class="sh_symbol">(</span>P<span class="sh_symbol">,</span> P <span class="sh_symbol">+</span> cnt<span class="sh_symbol">);</span>
        <span class="sh_keyword">for</span><span class="sh_symbol">(</span>i <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> cnt<span class="sh_symbol">;</span> <span class="sh_symbol">++</span>i<span class="sh_symbol">)</span>
            <span class="sh_keyword">if</span><span class="sh_symbol">(!</span>i <span class="sh_symbol">||</span> <span class="sh_symbol">(</span>P<span class="sh_symbol">[</span>i<span class="sh_symbol">]</span> <span class="sh_symbol">-</span> P<span class="sh_symbol">[</span>i <span class="sh_symbol">-</span> <span class="sh_number">1</span><span class="sh_symbol">]).</span><span class="sh_function">norm2</span><span class="sh_symbol">()</span> <span class="sh_symbol">&gt;</span> EPS<span class="sh_symbol">)</span>
                ans <span class="sh_symbol">+=</span> eps <span class="sh_symbol">&lt;</span> P<span class="sh_symbol">[</span>i<span class="sh_symbol">].</span>x <span class="sh_symbol">&amp;&amp;</span> P<span class="sh_symbol">[</span>i<span class="sh_symbol">].</span>x <span class="sh_symbol">&lt;</span> <span class="sh_number">100.0</span> <span class="sh_symbol">-</span> eps <span class="sh_symbol">&amp;&amp;</span> eps <span class="sh_symbol">&lt;</span> P<span class="sh_symbol">[</span>i<span class="sh_symbol">].</span>y <span class="sh_symbol">&amp;&amp;</span> P<span class="sh_symbol">[</span>i<span class="sh_symbol">].</span>y <span class="sh_symbol">&lt;</span> <span class="sh_number">100.0</span> <span class="sh_symbol">-</span> eps <span class="sh_symbol">&amp;&amp;</span> <span class="sh_function">check</span><span class="sh_symbol">(</span>P<span class="sh_symbol">[</span>i<span class="sh_symbol">],</span> u<span class="sh_symbol">);</span>
        <span class="sh_function">printf</span><span class="sh_symbol">(</span><span class="sh_string">"%d</span><span class="sh_specialchar">\n</span><span class="sh_string">"</span><span class="sh_symbol">,</span> ans<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
    <span class="sh_keyword">return</span> <span class="sh_number">0</span><span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>

</code></pre></div>

<h3>坑</h3>
<p><strong>坑1：</strong>不要忘记最后要进行去重和<strong>最终检验</strong>，还有在折痕上的需要排除。</p>

